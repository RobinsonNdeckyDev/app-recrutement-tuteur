<div class="d-flex justify-content-between align-items-center my-4">
    <button class="btn colorprimary" data-bs-toggle="modal" data-bs-target="#ajoutAdmin">
        Ajouter un administrateur
    </button>

    <input type="text" class="form-control w-50" placeholder="Rechercher un admin" (input)="searchAdmin($event)">
</div>

<table class="table table-striped mt-2">
    <thead class="">
        <tr>
            <th>Photo</th>
            <th>Prénom</th>
            <th>Email</th>
            <th>Téléphone</th>
            <th>Etat</th>
            <th class="text-center">Actions</th>
        </tr>
    </thead>
    <tbody>
        <!-- <tr>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>
                test
            </td>
            <td class="text-center d-flex justify-content-center align-items-center">
                <span><i class="pi pi-pencil" data-bs-toggle="modal" data-bs-target="#modifierAnneeAcademique"></i></span>
                <span><i class="pi pi-trash"></i></span>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>
                test
            </td>
            <td class="text-center d-flex justify-content-center align-items-center">
                <span><i class="pi pi-pencil" data-bs-toggle="modal" data-bs-target="#modifierAnneeAcademique"></i></span>
                <span><i class="pi pi-trash"></i></span>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>
                test
            </td>
            <td class="text-center d-flex justify-content-center align-items-center">
                <span><i class="pi pi-pencil" data-bs-toggle="modal" data-bs-target="#modifierAnneeAcademique"></i></span>
                <span><i class="pi pi-trash"></i></span>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>
                test
            </td>
            <td class="text-center d-flex justify-content-center align-items-center">
                <span><i class="pi pi-pencil" data-bs-toggle="modal" data-bs-target="#modifierAnneeAcademique"></i></span>
                <span><i class="pi pi-trash"></i></span>
            </td>
        </tr> -->
        @if (getPaginatedAdmin()) {
            <tr *ngFor="let admin of getPaginatedAdmin()">
                <td>{{ admin.photoProfil }}</td>
                <td>{{ admin.prenom }}</td>
                <td>{{ admin.email }}</td>
                <td>{{ admin.telephone }}</td>
                <td [ngClass]="admin.etat ? 'active-class' : 'inactive-class'">
                    {{ admin.etat ? 'Active' : 'Désactivée' }}
                </td>
                <td class="text-center d-flex justify-content-center align-items-center">
                    <span><i class="pi pi-pencil" data-bs-toggle="modal" data-bs-target="#modifierAdmin" (click)="preRemplirFormulaire(admin.id)"></i></span>
                    <span><i class="pi pi-trash" (click)="deleteAdmin(admin.id)"></i></span>
                </td>
            </tr>
        }
        @else {
            <p class="text-center text-primary my-4">
                Aucun administrateur disponible
            </p>
        }
    </tbody>
</table>

<!-- Pagination -->
<div class="d-flex justify-content-center mt-4 mb-3">
    <nav>
        <ul class="pagination">
            <li class="page-item" [ngClass]="{'disabled': currentPage === 1}">
                <a class="page-link" (click)="setPage(currentPage - 1)">&laquo;</a>
            </li>
            <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" [ngClass]="{'active': currentPage === (i + 1)}">
                <a class="page-link" (click)="setPage(i + 1)">{{ i + 1 }}</a>
            </li>
            <li class="page-item" [ngClass]="{'disabled': currentPage === totalPages}">
                <a class="page-link" (click)="setPage(currentPage + 1)">&raquo;</a>
            </li>
        </ul>
    </nav>
</div>



<!-- Modal d'ajout -->
<div class="modal fade" id="ajoutAdmin" tabindex="-1" aria-labelledby="ajoutAdmin" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="ajoutAdmin">Ajouter un administrateur</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="adminFormAdd" (ngSubmit)="addAdmin()">
                    <div class="col-6">
                        <div class="mb-3">
                            <label for="prenom" class="form-label">Prénom</label>
                            <input type="text" class="form-control" id="prenom" name="prenom" formControlName="prenom">
                        </div>
                        <div class="mb-3">
                            <label for="nom" class="form-label">Nom</label>
                            <input type="text" class="form-control" id="nom" name="nom" formControlName="nom">
                        </div>
                        <div class="mb-3">
                            <label for="adresse" class="form-label">Adresse</label>
                            <input type="text" class="form-control" id="adresse" name="adresse" formControlName="adresse">
                        </div>
                        <div class="mb-3">
                            <label for="telephone" class="form-label">Téléphone</label>
                            <input type="tel" class="form-control" id="telephone" name="telephone" formControlName="telephone">
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" formControlName="email">
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Mot de passe </label>
                            <input type="password" class="form-control" id="password" name="password" formControlName="password">
                        </div>
                        <div class="mb-3">
                            <label for="photoProfil" class="form-label">Photo de profil</label>
                            <input type="file" class="form-control" id="photoProfil" name="photoProfil" formControlName="photoProfil">
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <input type="text" class="form-control" id="description" name="description" placeholder="Décrivez votre année académique" formControlName="description">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-outline-primary" [disabled]="!adminFormAdd.valid">Ajouter</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal Modifier -->
<!-- <div class="modal fade" id="modifierAnneeAcademique" tabindex="-1" aria-labelledby="modifierAnneeAcademiqueLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="modifierAnneeAcademiqueLabel">Modification d'un admin</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="adminFormUpdate" (ngSubmit)="updateAdmin(selectedAdmin?.id)">
                    <div class="mb-3">
                        <label for="annee" class="form-label">Année</label>
                        <input type="text" class="form-control" id="annee" formControlName="annee">
                    </div>
                    <div class="mb-3">
                        <label for="dateDebut" class="form-label">Début</label>
                        <input type="date" class="form-control" id="dateDebut" formControlName="dateDebut">
                    </div>
                    <div class="mb-3">
                        <label for="dateFin" class="form-label">Fin</label>
                        <input type="date" class="form-control" id="dateFin" formControlName="dateFin">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-outline-primary" [disabled]="adminFormUpdate.invalid">Modifier</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> -->